!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("ngx-tour-core"),require("@angular/material"),require("@angular/common"),require("withinviewport"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-tour-md-menu",["exports","@angular/core","ngx-tour-core","@angular/material","@angular/common","withinviewport","rxjs/operators"],e):e((t=t||self)["ngx-tour-md-menu"]={},t.ng.core,t.ngxTourCore,t.ng.material,t.ng.common,t.withinviewport,t.rxjs.operators)}(this,function(t,e,r,n,o,i,a){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function u(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function c(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}var m=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return u(r,t),r.decorators=[{type:e.Injectable}],r}(r.TourService),d=function(){function t(){this.menu=new n.MatMenu(void 0,void 0,{xPosition:"after",yPosition:"below",overlapTrigger:!0,backdropClass:""})}return t.decorators=[{type:e.Component,args:[{selector:"tourAnchorOpener",template:'<span [matMenuTriggerFor]="menu" #trigger="matMenuTrigger"></span>',styles:[":host { display: none; }"]}]}],t.propDecorators={menu:[{type:e.Input}],trigger:[{type:e.ViewChild,args:[n.MatMenuTrigger,{static:!0}]}]},t}();var h=function(){function t(){}return t.decorators=[{type:e.Injectable}],t}();var f=function(){function t(t){this.renderer=t.createRenderer(null,null)}return t.prototype.show=function(t){var e=t.nativeElement.getBoundingClientRect();this.backdropElement||(this.backdropElement=this.renderer.createElement("div"),this.renderer.addClass(this.backdropElement,"ngx-tour_backdrop"),this.renderer.appendChild(document.body,this.backdropElement)),this.setStyles(e)},t.prototype.close=function(){this.backdropElement&&(this.renderer.removeChild(document.body,this.backdropElement),this.backdropElement=null)},t.prototype.setStyles=function(t){var e,r,n={position:"fixed",width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px","box-shadow":"0 0 0 9999px rgba(0, 0, 0, 0.7)","z-index":"100"};try{for(var o=c(Object.keys(n)),i=o.next();!i.done;i=o.next()){var a=i.value;this.renderer.setStyle(this.backdropElement,a,n[a])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.decorators=[{type:e.Injectable}],t.ctorParameters=function(){return[{type:e.RendererFactory2}]},t}();var g=function(){function t(t,e,r,n,o,i,a){this.componentFactoryResolver=t,this.injector=e,this.viewContainer=r,this.element=n,this.tourService=o,this.tourStepTemplate=i,this.tourBackdrop=a,this.opener=this.viewContainer.createComponent(this.componentFactoryResolver.resolveComponentFactory(d)).instance}return t.prototype.ngOnInit=function(){this.tourService.register(this.tourAnchor,this)},t.prototype.ngOnDestroy=function(){this.tourService.unregister(this.tourAnchor)},t.prototype.showTourStep=function(t){var e=this;this.isActive=!0,this.tourStepTemplate.templateComponent.step=t,t.preventScrolling||(i(this.element.nativeElement,{sides:"bottom"})?i(this.element.nativeElement,{sides:"left top right"})||this.element.nativeElement.scrollIntoView(!0):this.element.nativeElement.scrollIntoView(!1)),this.opener.trigger._element=this.element,this.opener.trigger.menu=this.tourStepTemplate.templateComponent.tourStep,this.opener.trigger.ngAfterContentInit(),this.opener.trigger.openMenu(),t.enableBackdrop?this.tourBackdrop.show(this.element):this.tourBackdrop.close(),t.prevBtnTitle=t.prevBtnTitle||"Prev",t.nextBtnTitle=t.nextBtnTitle||"Next",t.endBtnTitle=t.endBtnTitle||"End",this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.menuCloseSubscription=this.opener.trigger.menuClosed.pipe(a.first()).subscribe(function(){e.tourService.getStatus()!==r.TourState.OFF&&e.tourService.end(),e.tourBackdrop.close()})},t.prototype.hideTourStep=function(){this.isActive=!1,this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.opener.trigger.closeMenu(),this.tourService.getStatus()===r.TourState.OFF&&this.tourBackdrop.close()},t.decorators=[{type:e.Directive,args:[{selector:"[tourAnchor]"}]}],t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:e.Injector},{type:e.ViewContainerRef},{type:e.ElementRef},{type:m},{type:h},{type:f}]},t.propDecorators={tourAnchor:[{type:e.Input}],isActive:[{type:e.HostBinding,args:["class.touranchor--is-active"]}]},t}();var v=function(t){function r(e,r){var n=t.call(this,r)||this;return n.tourStepTemplateService=e,n.tourService=r,n.step={},n}return u(r,t),r.prototype.ngAfterViewInit=function(){this.tourStepTemplateService.templateComponent=this},r.decorators=[{type:e.Component,args:[{selector:"tour-step-template",template:'\n    <mat-menu [overlapTrigger]="false" class="tour-step">\n      <ng-container *ngTemplateOutlet="stepTemplate || defaultTemplate; context: { step: step }"></ng-container>\n    </mat-menu>\n    <ng-template #defaultTemplate let-step="step">\n      <mat-card (click)="$event.stopPropagation()">\n        <mat-card-title>\n          {{step?.title}}\n        </mat-card-title>\n        <mat-card-content>\n          {{step?.content}}\n        </mat-card-content>\n        <mat-card-actions>\n          <button mat-icon-button [disabled]="!tourService.hasPrev(step)" (click)="tourService.prev()">\n            <mat-icon>chevron_left</mat-icon>\n          </button>\n          <button mat-icon-button [disabled]="!tourService.hasNext(step)" (click)="tourService.next()">\n            <mat-icon>chevron_right</mat-icon>\n          </button>\n          <button mat-button (click)="tourService.end()">{{step?.endBtnTitle}}</button>\n        </mat-card-actions>\n      </mat-card>\n    </ng-template>\n  ',styles:["\n      ::ng-deep .tour-step .mat-menu-content { \n          padding: 0 !important; \n      }\n  "]}]}],r.ctorParameters=function(){return[{type:h},{type:m}]},r.propDecorators={tourStep:[{type:e.ViewChild,args:[n.MatMenu,{static:!0}]}],stepTemplate:[{type:e.Input},{type:e.ContentChild,args:[e.TemplateRef,{static:!0}]}]},r}(r.TourHotkeyListenerComponent);var y=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:l([h,f],r.TourModule.forRoot().providers,[m])}},t.decorators=[{type:e.NgModule,args:[{declarations:[g,v,d],entryComponents:[d],exports:[g,v,r.TourModule],imports:[o.CommonModule,r.TourModule,n.MatMenuModule,n.MatCardModule,n.MatButtonModule,n.MatIconModule]}]}],t}();t.TourAnchorMatMenuDirective=g,t.TourMatMenuModule=y,t.TourService=m,t.TourStepTemplateComponent=v,t.ɵa=m,t.ɵb=h,t.ɵc=f,t.ɵd=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-tour-md-menu.umd.min.js.map