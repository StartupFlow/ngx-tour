{"version":3,"file":"ngx-tour-ngx-popper.js","sources":["ng://ngx-tour-ngx-popper/lib/ngx-popper-tour.service.ts","ng://ngx-tour-ngx-popper/lib/tour-step-template.service.ts","ng://ngx-tour-ngx-popper/lib/tour-anchor.directive.ts","ng://ngx-tour-ngx-popper/lib/tour-step-template.component.ts","ng://ngx-tour-ngx-popper/lib/ngx-popper.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { TourService } from 'ngx-tour-core';\n\nimport { INgxpStepOption } from './step-option.interface';\n\n@Injectable()\nexport class NgxpTourService extends TourService<INgxpStepOption> {}\n","import { Injectable } from '@angular/core';\nimport { PopperContent } from 'ngx-popper';\nimport { TourStepTemplateComponent } from './tour-step-template.component';\n\n@Injectable()\nexport class TourStepTemplateService {\n  public template: PopperContent;\n  public templateComponent: TourStepTemplateComponent;\n}\n","import { Directive, ElementRef, Host, HostBinding, Input, OnDestroy, OnInit } from '@angular/core';\nimport { NgxPopperModule, PopperController, Placements, Triggers } from 'ngx-popper';\nimport { TourAnchorDirective } from 'ngx-tour-core';\nimport withinviewport from 'withinviewport';\n\nimport { NgxpTourService } from './ngx-popper-tour.service';\nimport { TourStepTemplateService } from './tour-step-template.service';\nimport { INgxpStepOption as IStepOption } from './step-option.interface';\n\n@Directive({ selector: '[tourAnchor]'})\nexport class TourAnchorNgxPopperPopoverDirective extends PopperController implements OnInit {\n  // Overwrite parent ngOnInit to do nothing since the content property isn't set yet.\n  ngOnInit() {}\n\n  // Call this to initialize the popover once the content has been set\n  initialize() {\n    super.ngOnInit();\n  }\n}\n\n@Directive({\n  selector: '[tourAnchor]',\n})\nexport class TourAnchorNgxPopperDirective implements OnInit, OnDestroy, TourAnchorDirective {\n  @Input() public tourAnchor: string;\n\n  @HostBinding('class.touranchor--is-active')\n  public isActive: boolean;\n\n  constructor(private tourService: NgxpTourService,\n              private tourStepTemplate: TourStepTemplateService,\n              private element: ElementRef,\n              @Host() private popoverDirective: TourAnchorNgxPopperPopoverDirective,\n  ) {\n  }\n\n  public ngOnInit(): void {\n    this.tourService.register(this.tourAnchor, this);\n  }\n\n  public ngOnDestroy(): void {\n    this.tourService.unregister(this.tourAnchor);\n  }\n\n  public showTourStep(step: IStepOption): void {\n    this.isActive = true;\n    this.tourStepTemplate.templateComponent.step = step;\n    step.prevBtnTitle = step.prevBtnTitle || 'Prev';\n    step.nextBtnTitle = step.nextBtnTitle || 'Next';\n    step.endBtnTitle = step.endBtnTitle || 'End';\n    \n    this.popoverDirective.content = this.tourStepTemplate.template;\n    this.popoverDirective.targetElement = this.element.nativeElement;\n    this.popoverDirective.placement = step.placement || Placements.Auto;\n    this.popoverDirective.showTrigger = Triggers.NONE;\n\n    if(step.popperSettings){\n      this.popoverDirective.boundariesElement = step.popperSettings.boundariesElement || undefined;\n      this.popoverDirective.closeOnClickOutside = step.popperSettings.closeOnClickOutside || false;\n      this.popoverDirective.disableAnimation = step.popperSettings.disableAnimation || false;\n      this.popoverDirective.disabled = step.popperSettings.disabled || false;\n      this.popoverDirective.disableStyle = step.popperSettings.disableStyle || false;\n      this.popoverDirective.forceDetection = step.popperSettings.forceDetection || false;\n      this.popoverDirective.hideOnClickOutside = step.popperSettings.hideOnClickOutside || false;\n      this.popoverDirective.hideOnScroll = step.popperSettings.hideOnScroll || false;\n      this.popoverDirective.hideTimeout = step.popperSettings.hideTimeout || 0;\n      this.popoverDirective.positionFixed = step.popperSettings.positionFixed || false;\n      this.popoverDirective.showDelay = step.popperSettings.showDelay || 0;\n      this.popoverDirective.showOnStart = step.popperSettings.showOnStart || false;\n      this.popoverDirective.showTrigger = step.popperSettings.showTrigger || Triggers.NONE;\n      this.popoverDirective.timeoutAfterShow = step.popperSettings.timeoutAfterShow || 0;\n\n      //TODO: Can these even get passed in via json?\n      // this.popoverDirective.popperModifiers = step.popperSettings.popperModifiers || undefined;\n      // this.popoverDirective.popperOnHidden = step.popperSettings.popperOnHidden || undefined;\n      // this.popoverDirective.popperOnShown = step.popperSettings.popperOnShown || undefined;\n    }\n\n    this.popoverDirective.initialize();\n    if (step.hasOwnProperty('popperSettings') && step.popperSettings.hasOwnProperty('showDelay')) {\n      this.popoverDirective.scheduledShow();\n    } else {\n      this.popoverDirective.show();\n    }\n\n    if (!step.preventScrolling) {\n      if (!withinviewport(this.element.nativeElement, { sides: 'bottom' })) {\n        (<HTMLElement>this.element.nativeElement).scrollIntoView(false);\n      } else if (!withinviewport(this.element.nativeElement, { sides: 'left top right' })) {\n        (<HTMLElement>this.element.nativeElement).scrollIntoView(true);\n      }\n    }\n  }\n\n  public hideTourStep(): void {\n    this.isActive = false;\n    this.popoverDirective.hide();\n  }\n}\n","import { AfterViewInit, AfterContentInit, Component, ContentChild, Input, ViewChild, ViewEncapsulation, TemplateRef } from '@angular/core';\nimport { IStepOption, TourHotkeyListenerComponent } from 'ngx-tour-core';\nimport { NgxPopperModule, PopperContent } from 'ngx-popper';\nimport { NgxpTourService } from './ngx-popper-tour.service';\nimport { TourStepTemplateService } from './tour-step-template.service';\n\n@Component({\n  encapsulation: ViewEncapsulation.None,\n  selector: 'tour-step-template',\n  template: `\n    <popper-content class=\"popper-content\">\n      <ng-container *ngTemplateOutlet=\"stepTemplate || defaultTemplate; context: { step: step }\"></ng-container>\n    </popper-content>\n\n    <ng-template #defaultTemplate let-step=\"step\">\n      <p class=\"ngxp-title\">{{step?.title}}</p>\n      <p class=\"ngxp-content\">{{step?.content}}</p>\n      <div class=\"tour-step-navigation\">\n        <button [hidden]=\"!tourService.hasPrev(step)\" class=\"ngxp-btn btn-prev\" (click)=\"tourService.prev()\">Â« {{step?.prevBtnTitle}}</button>\n        <button [hidden]=\"!tourService.hasNext(step)\" class=\"ngxp-btn btn-next\" (click)=\"tourService.next()\">{{step?.nextBtnTitle}} Â»</button>\n        <button class=\"ngxp-btn btn-end\" (click)=\"tourService.end()\">{{step?.endBtnTitle}}</button>\n      </div>\n    </ng-template>\n  `,\n})\nexport class TourStepTemplateComponent extends TourHotkeyListenerComponent implements AfterViewInit, AfterContentInit {\n  @ViewChild(PopperContent, { static: true }) public popperContent: PopperContent;\n\n  @Input()\n  @ContentChild(TemplateRef, { static: true })\n  public stepTemplate: TemplateRef<{step: IStepOption}>;\n\n  public step: IStepOption = {};\n\n  constructor(private tourStepTemplateService: TourStepTemplateService, public tourService: NgxpTourService) {\n    super(tourService);\n  }\n\n  public ngAfterViewInit(): void {\n    this.tourStepTemplateService.templateComponent = this;\n  }\n\n  public ngAfterContentInit(): void {\n    this.tourStepTemplateService.template = this.popperContent;\n  }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { NgxPopperModule } from 'ngx-popper';\nimport { TourModule } from 'ngx-tour-core';\n\nimport { TourAnchorNgxPopperDirective, TourAnchorNgxPopperPopoverDirective } from './tour-anchor.directive';\nimport { TourStepTemplateComponent } from './tour-step-template.component';\nimport { TourStepTemplateService } from './tour-step-template.service';\nimport { NgxpTourService } from './ngx-popper-tour.service';\n\nexport { TourAnchorNgxPopperDirective, TourAnchorNgxPopperPopoverDirective, TourStepTemplateComponent, NgxpTourService };\n\n@NgModule({\n  declarations: [TourAnchorNgxPopperDirective, TourAnchorNgxPopperPopoverDirective, TourStepTemplateComponent],\n  exports: [TourAnchorNgxPopperDirective, TourAnchorNgxPopperPopoverDirective, TourStepTemplateComponent],\n  imports: [CommonModule, NgxPopperModule.forRoot()],\n})\nexport class TourNgxPopperModule {\n  public static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: TourNgxPopperModule,\n      providers: [\n        TourStepTemplateService,\n        ...TourModule.forRoot().providers,\n        NgxpTourService,\n      ],\n    };\n  }\n}\n"],"names":["tslib_1.__extends"],"mappings":"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"}